<!DOCTYPE html>
<html lang="en">

<head>
</head>

<body>

<h1 id="bigOne"></h1><p id="token"></p>
hola
                          
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase-database.js"></script>
	<script src="https://danielvy01.github.io/prueba3/firebase-messaging-sw.js"></script>


<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyADLn8iigH52gFkkMO9yiNhj6PfJwDlEJI",
    authDomain: "danidroid-b5173.firebaseapp.com",
    databaseURL: "https://danidroid-b5173.firebaseio.com",
    storageBucket: "danidroid-b5173.appspot.com",
    messagingSenderId: "648531037710"
  };
  var midb=firebase.initializeApp(config);

	var bigOne=document.getElementById("bigOne");
	var dbRef=midb.database().ref().child("text");
	dbRef.on('value',snap=>bigOne.innerText=snap.val());
	
	
	
	const messaging=firebase.messaging();
	messaging.requestPermission().then(function(){
		console.log("Have permission");
		return messaging.getToken();
	}).then(function(token){
		console.log(token);
	}).catch(function(err){debugger;
		console.log("Error Ocurrido");
	});
	navigator.serviceWorker.ready.then(function(serviceWorkerRegistration) {                          
        serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly: true})                        
          .then(function(subscription) {                                                                
           alert(subscription.endpoint);
          });
        });                                                                                             
      navigator.serviceWorker.register('../firebase-messaging-sw.js');
		
	messaging.onMessage(function(payload){
		console.log("onMessage: ", payload)
	});
</script>



</body>

</html>
